{% extends 'layout.html' %}
{% block content %}
    <h5>Created by {{ user.username }}</h5>
    <div class="board mt-3">
        <!-- Cork Board Header -->
        <div class="container mt-4">
            <h2>{{ board.title }}</h2>
            <h6>{{ board.description }}</h6>
            <hr>
        </div>

        <!-- Content Section -->
        <div class="container mt-4">
            <p>{{ board.content }}</p>
        </div>
    </div>

    {% if current_user.id == user.id %}
    <!-- Add Content Section -->
    <div class="mt-4">
        <form action="/boards/{{board.id}}/edit" method="GET">
            <button class="btn btn-info rounded">+</button>
        </form>
    </div>
    {% endif %}


    <!-- Add Comment Section -->
    {% if current_user.is_authenticated %}
    <div class="card mt-4">
       <div class="card-body">
           <form action="/boards/{{board.id}}/comment" method="POST">
               <textarea class="form-control" id="comment" name="comment" required placeholder="Add a comment.."></textarea>
               <div class="mt-3">
                   <button type="submit" class="btn btn-info">Submit</button>
                   <button type="reset" class="btn btn-outline-info">Cancel</button>
                </div>
           </form>
       </div>
   </div>
   {% endif %}

    <!-- Comments Section -->
    <div class="my-4">
        <h3>Comments</h3>
        {%if comments|length == 0%}
            <p class="mx-4 mt-3 fs-2">There are no comments avaliable.</p>
        {% else %}
            {% for comment, poster in comment_data %}
            <div class="card mt-3">
                <div class="card-header border-0 bg-transparent d-flex align-items-center">
                    <img src="{{ url_for('static', filename='profile_pics/' + poster.image_file) }}" class="rounded-circle img-thumbnail" style="height: 70px;">
                    <h5 class="mx-3">{{ poster.username }}</h5>
                </div>

                <div class="mx-4">
                    <p>{{ comment.content }}</p>
                    {% if current_user.id == poster.id %}
                    <form class="my-3" action="/boards/{{board.id}}/comment/delete/{{comment.id}}" method="POST">
                        <button type="submit" class="btn btn-outline-info">Delete</button>
                    </form>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}